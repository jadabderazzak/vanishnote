<!-- Mobile Header (visible only on mobile) -->
<div class="fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-600 z-40 md:hidden flex justify-between items-center p-4">
    <!-- Mobile Logo -->
    <a href="{{ path('app_home')}}" class="flex items-start md:hidden">
        <img src="{{ asset('template/logo/logo.png')}}" class="w-[100px] sm:w-[120px]" alt="Vanish Note"/>
    </a>
    
    <!-- Mobile Menu Button -->
    <button id="mobile-menu-button" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
        <span class="sr-only">Open main menu</span>
        <img src="{{ asset('template/logo/menub.svg')}}" class="w-6" alt="Menu"/>
    </button>
</div>

<!-- Sidebar Navigation -->
<aside id="sidebar" class="fixed top-0 left-0 z-40 w-[320px] h-screen transition-transform -translate-x-full md:translate-x-0 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-600 pt-0 md:pt-0">
    <div class="h-full px-3 py-4 overflow-y-auto">
        <!-- Desktop Logo (hidden on mobile) -->
        <div class="px-3 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700 hidden md:block">
            <a href="{{ path('app_home')}}" class="flex items-center w-full justify-center">
                <img src="{{ asset('template/logo/logo.png')}}" class="w-[140px]" alt="Vanish Note"/>
            </a>
        </div>
        
        <!-- Navigation Menu -->
        <ul class="space-y-2 mt-0 md:mt-0">
            <!-- Dashboard Link -->
            <li>
                <a href="{{ path('app_home')}}" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <span class="ms-3">{{"Dashboard" | trans}}</span>
                </a>
            </li>
            
            <!-- Notes Dropdown -->
            <li>
                <button type="button" class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700" aria-controls="notes-dropdown" data-collapse-toggle="notes-dropdown">
                    <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">{{"My Notes" | trans}}</span>
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                    </svg>
                </button>
                <ul id="notes-dropdown" class="hidden py-2 space-y-2">
                    <li>
                        <a href="{{ path('app_notes_new')}}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            {{"Create New Note" | trans}}
                        </a>
                    </li>
                    <li>
                        <a href="{{ path('app_notes')}}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            {{"Notes List" | trans}}
                        </a>
                    </li>
                    <li>
                        <a href="{{ path('app_notes_logs')}}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            {{"Logs" | trans}}
                        </a>
                    </li>
                </ul>
            </li>
            
            <!-- Subscription/Payment Dropdown -->
            <li>
                <button type="button" class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700" aria-controls="subscription-dropdown" data-collapse-toggle="subscription-dropdown">
                    <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">{{"Subscription / Payment" | trans}}</span>
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                    </svg>
                </button>
                <ul id="subscription-dropdown" class="hidden py-2 space-y-2">
                    <li>
                        <a href="{{ path('app_client_subscription')}}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            {{"Subscription" | trans}}
                        </a>
                    </li>
                    <li>
                        <a href="{{ path('app_client_payments')}}" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            {{"Payment" | trans}}
                        </a>
                    </li>
                </ul>
            </li>
            
            <!-- Profile Link -->
            <li>
                <a href="{{ path('app_clients_profile')}}" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <span class="ms-3">{{"Profile" |trans}}</span>
                </a>
            </li>
            
            <!-- Logout Link -->
            <li>
                <a href="{{ path('app_logout')}}" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group">
                    <span class="ms-3">{{"Logout" |trans}}</span>
                </a>
            </li>
            
            <!-- Language Selector -->
            <li>
                <button type="button" class="flex items-center w-full p-2 text-base text-gray-900 transition duration-75 rounded-lg group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700" aria-controls="language-dropdown" data-collapse-toggle="language-dropdown">
                    <span class="flex-1 ms-3 text-left rtl:text-right whitespace-nowrap">
                        {% set language = "English" %}
                        {% if app.request.locale == "fr" %}
                            {% set language = "Fran√ßais" %}
                        {% elseif app.request.locale == "en" %}
                            {% set language = "English" %}
                        {% elseif app.request.locale == "de" %}
                            {% set language = "Deutsch" %}
                        {% elseif app.request.locale == "es" %}
                            {% set language = "Espagnole" %}
                        {% endif %}
                        {{ language | trans }}
                    </span>
                    <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                    </svg>
                </button>
                <ul id="language-dropdown" class="hidden py-2 space-y-2">
                    <li>
                        <a href="javascript:;" onclick="onChangeLanguage('fr')" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 rounded-full me-2" viewbox="0 0 32 32">
                                <path fill="#fff" d="M10 4H22V28H10z"></path>
                                <path d="M5,4h6V28H5c-2.208,0-4-1.792-4-4V8c0-2.208,1.792-4,4-4Z" fill="#092050"></path>
                                <path d="M25,4h6V28h-6c-2.208,0-4-1.792-4-4V8c0-2.208,1.792-4,4-4Z" transform="rotate(180 26 16)" fill="#be2a2c"></path>
                            </svg>
                            {{"French" |trans}}
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;" onclick="onChangeLanguage('en')" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 rounded-full me-2" viewbox="0 0 512 512">
                                <path fill="#bd3d44" d="M0 0h247v10H0zM0 20h247v10H0zM0 40h247v10H0zM0 60h247v10H0zM0 80h247v10H0zM0 100h247v10H0zM0 120h247v10H0z" transform="scale(3.9385)"/>
                                <path fill="#fff" d="M0 10h247v10H0zM0 30h247v10H0zM0 50h247v10H0zM0 70h247v10H0zM0 90h247v10H0zM0 110h247v10H0z" transform="scale(3.9385)"/>
                                <path fill="#192f5d" d="M0 0h98.8v70H0z" transform="scale(3.9385)"/>
                            </svg>
                            {{"English" |trans}}
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;" onclick="onChangeLanguage('es')" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 rounded-sm me-2" viewbox="0 0 3 2">
                                <rect width="3" height="2" y="0" fill="#AA151B"/>
                                <rect width="3" height="1" y="0.5" fill="#F1BF00"/>
                            </svg>
                            {{"Spanish" | trans}}
                        </a>
                    </li>
                    <li>
                        <a href="javascript:;" onclick="onChangeLanguage('de')" class="flex items-center w-full p-2 text-gray-900 transition duration-75 rounded-lg pl-11 group hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 rounded-full me-2" viewbox="0 0 5 3">
                                <rect width="5" height="1" y="0" fill="#000"/>
                                <rect width="5" height="1" y="1" fill="#DD0000"/>
                                <rect width="5" height="1" y="2" fill="#FFCE00"/>
                            </svg>
                            {{"German" |trans}}
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</aside>

<!-- Mobile Overlay -->
<div id="sidebar-backdrop" class="fixed inset-0 z-30 hidden bg-gray-900/50 dark:bg-gray-900/80 md:hidden"></div>

<!-- JavaScript for Sidebar Toggle -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const sidebar = document.getElementById('sidebar');
    const mobileButton = document.getElementById('mobile-menu-button');
    const backdrop = document.getElementById('sidebar-backdrop');
    
    // Function to close sidebar
    const closeSidebar = () => {
        sidebar.classList.add('-translate-x-full');
        backdrop.classList.add('hidden');
    };
    
    // Function to open sidebar
    const openSidebar = () => {
        sidebar.classList.remove('-translate-x-full');
        backdrop.classList.remove('hidden');
    };
    
    // Toggle sidebar on button click
    mobileButton.addEventListener('click', function() {
        if (sidebar.classList.contains('-translate-x-full')) {
            openSidebar();
        } else {
            closeSidebar();
        }
    });
    
    // Close sidebar when clicking on backdrop
    backdrop.addEventListener('click', closeSidebar);
    
    // Close sidebar when clicking a nav link (mobile only)
    document.querySelectorAll('#sidebar a').forEach(link => {
        link.addEventListener('click', function() {
            if (window.innerWidth < 768) {
                closeSidebar();
            }
        });
    });
    
    // Responsive behavior
    const handleResize = () => {
        if (window.innerWidth >= 768) {
            sidebar.classList.remove('-translate-x-full');
            backdrop.classList.add('hidden');
        } else {
            sidebar.classList.add('-translate-x-full');
            backdrop.classList.add('hidden');
        }
    };
    
    window.addEventListener('resize', handleResize);
    handleResize(); // Initialize on load
});
</script>